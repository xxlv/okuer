---
author: X
comments: true
date: 2016-05-07 14:00:00+00:00
layout: post
title:  ä½¿ç”¨composerç®¡ç†ä¾èµ–
categories: php

---

#### ä»€ä¹ˆæ˜¯composer ?
**ä¸€å¥è¯æ¥è¯´ï¼Œcomposeræ˜¯ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·ã€‚ç±»ä¼¼äºnpmæˆ–è€…bundle.**


#### ä¸ºä»€ä¹ˆæ˜¯composer?

##### å…ˆçœ‹çœ‹æ²¡æœ‰composerä¹‹å‰çš„å†å²

composerä¹‹å‰ï¼Œæ‰€æœ‰çš„ä¾èµ–éƒ½æ˜¯å¼€å‘è€…æ‰‹åŠ¨ç»´æŠ¤çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¼€å‘é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šå»ºç«‹ä¸€ä¸ªlibraryä¹‹ç±»çš„ç›®å½•æ¥å­˜æ”¾å¼•ç”¨çš„ç¬¬ä¸‰ä»½åº“çš„å®Œæ•´copyã€‚ä¸€æ—¦ï¼Œå¼•ç”¨çš„ç¬¬ä¸‰ä»½åº“è¿›è¡Œå‡çº§ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸äººå·¥å»å‡çº§ã€‚éšç€webè¶Šæ¥è¶Šå¤æ‚ï¼Œäººå·¥å»ç»´æŠ¤ä¾èµ–æ…¢æ…¢å˜æˆç¾éš¾ï¼Œå¹¶ä¸”å¢åŠ äº†å‘ç”Ÿé”™è¯¯çš„æœºä¼šã€‚ä¸€å¤©æ™šä¸Šï¼Œä¸€ä¸ªå®¶ä¼™å†ä¹Ÿå—ä¸äº†è¿™æ ·çš„å·¥ä½œ,composerè¯ç”Ÿäº†ã€‚


##### å¦‚æœéè¦ä¸€ä¸ªç†ç”±çš„è¯ï¼Œé¢ï¼Œå¦‚ä¸‹ï¼š
- è‡ªåŠ¨ç®¡ç†å¤æ‚ä¾èµ–ï¼Œæ¶ˆé™¤æ‰‹åŠ¨cpä¾èµ–å¸¦æ¥çš„é”™è¯¯å’Œå·¨å¤§çš„æ—¶é—´ç²¾åŠ›æ¶ˆè€—
- ä¸»æµæ¡†æ¶å‡æ”¯æŒ
- è¿™å¾ˆé…·ä¸æ˜¯ä¹ˆï¼ŸğŸ˜„

#### å¿«é€Ÿçš„å¼€å§‹å’Œç»“æŸ

##### å®‰è£…
è¿™é‡Œæœ‰è¯¦ç»†çš„å®‰è£…æ­¥éª¤ https://getcomposer.org/download/

##### rootåŒ…å’Œä¾èµ–åŒ…
rootåŒ…å’Œä¾èµ–åŒ…æ˜¯ä¸€ä¸ªç›¸å¯¹æ¦‚å¿µï¼Œå½“ä½ å¼€å‘ä¸€ä¸ªappï¼Œå¹¶ä¸”ä½¿ç”¨composerçš„æ—¶å€™ï¼Œä½ å½“å‰çš„appå°±æ˜¯ä¸€ä¸ªrootåŒ…ã€‚ä½ æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹çš„åŒ…å°±æ˜¯ä¾èµ–åŒ…ã€‚å½“ä½ å¼€å‘å®Œæ¯•çš„appè¢«å¦ä¸€ä¸ªappæ‰€ä¾èµ–ï¼Œé‚£ä¹ˆä½ çš„appå°±å˜æˆå¦ä¸€ä¸ªappçš„ä¾èµ–åŒ…ã€‚

##### è¯´å‡ºä½ çš„ä¾èµ–
æ‰€æœ‰çš„composerçš„ä¾èµ–éƒ½åœ¨composer.jsoné‡Œé¢å£°æ˜ï¼Œä½ å¯ä»¥æ‰‹åŠ¨å»åˆ›å»ºè¿™æ ·ä¸€ä¸ªjsonæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ã€‚

```   
    composer require "your dependency"
```
ç„¶åï¼Œä½¿ç”¨`composer install`,å°±å¯ä»¥è‡ªåŠ¨å®‰è£…ä½ å£°æ˜çš„ä¾èµ–ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æ ¹æ®composer.jsonçš„é…ç½®æ¥å¯»æ‰¾åˆé€‚çš„æºä»“åº“è¿›è¡Œä¸‹æ¥ã€‚é»˜è®¤çš„packageçš„ä»“åº“æ˜¯åœ¨https://packagist.org/ ä¸Šã€‚


##### å¸¸è§çš„å‘½ä»¤


`composer init # åˆå§‹åŒ–`
`composer require "ä½ çš„ä¾èµ–" #å£°æ˜ä¾èµ–ï¼Œå°†åœ¨composer.jsoné‡Œé¢å¢åŠ å¯¹è¯¥ä¾èµ–çš„å£°æ˜`
`composer update  #æ›´æ–°ä¾èµ–ï¼Œå°†è‡ªåŠ¨æ£€æµ‹æ›´æ–°`ï¼Œ

##### åŸç†
composer.pharæ˜¯composerçš„æºä»£ç çš„æ‰“åŒ…ï¼ˆç±»æ¯”jarï¼‰ã€‚composeræ˜¯ä¸€ä¸ªphpç¨‹åºï¼Œæ‰€ä»¥å¯ä»¥ç”¨ `php composer.phar å‘½ä»¤`çš„å½¢å¼æ¥æ‰§è¡Œã€‚è¿™æ˜¯åœ¨å…¨å±€æ²¡æœ‰å®‰è£…composerçš„æƒ…å†µä¸‹çš„åšæ³•ã€‚
composerä¼šå°†ä½ å£°æ˜çš„ä¾èµ–ä¸‹è½½åˆ°æŒ‡å®šçš„ç›®å½•ï¼Œé»˜è®¤çš„ï¼Œå¦‚åœ¨vendorä¸‹ã€‚ç„¶åè‡ªåŠ¨ç”Ÿæˆautoload.åœ¨phpæ”¯æŒnamespaceä¹‹åã€‚å¦‚ä¸‹çš„ä»£ç 

`ï½€ï½€
    $f=new F;

`ï½€ï½€
æ³¨æ„ï¼Œä¸Šé¢çš„ä»£ç ï¼Œå…¶å®æ˜¯ä¸€ä¸ªç›¸å¯¹çš„namespaceï¼ˆæ²¡æœ‰ä»¥\\å¼€å¤´çš„ç±»éƒ½æ˜¯ç›¸å¯¹namespaceï¼‰åœ¨æ‰§è¡Œæ—¶å€™ï¼Œå°†æœ‰ä¸€ä¸ªæœç´¢æ ‘æ¥å¯»æ‰¾Fç±»çš„å®šä¹‰ã€‚è¿™ä¸ªé¡ºåºæ˜¯ï¼šå½“å‰åç§°ç©ºé—´ï¼>çˆ¶namesapce->å…¨å±€namesapce.

è¯¦ç»†è§è¿™é‡Œï¼šhttp://php.net/manual/zh/language.namespaces.rationale.php


```

<?php
namespace f;

class F {}

$f=new F;   #success

$f=new \f\F; #success

$f=new \F;   # Fatal error: Class 'F' not found

```
åœ¨ä¸Šé¢å®šä¹‰çš„ç®€å•çš„ç±»ä¸­ï¼Œä½¿ç”¨\f\Fç±»ä¼¼â€œç»å¯¹è·¯å¾„â€ æ¥è®¿é—®ç±»ï¼Œæœ€åä¸€ä¸ª\F,æ˜¯å› ä¸ºåœ¨å…¨å±€namesapceä¸­å¹¶æ²¡æœ‰ Fçš„ç±»ä¿¡æ¯ã€‚
å½“è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„ç±»æ—¶å€™ï¼Œphpä¼šå…·æœ‰å®Œæ•´namespaceçš„è°ƒç”¨ä¿¡æ¯ä¼ é€’ç»™spl_autoload_registeræ–¹æ³•ã€‚è¯¥æ–¹æ³•å¤„ç†classå’ŒçœŸå®æ–‡ä»¶çš„æ˜ å°„å…³ç³»ã€‚composeråšäº†è¿™éƒ¨åˆ†å·¥ä½œã€‚composerè‡ªåŠ¨å°†å®ƒç®¡ç†çš„ç¬¬ä¸‰ä»½çš„åº“ï¼Œæ³¨å†Œè¿›äº†autoloadã€‚

#### æ€»ç»“
composerç®¡ç†ä¾èµ–ã€‚åˆ©ç”¨phpçš„namespaceçš„ç‰¹æ€§ï¼Œå®ç°äº†autoload.

#### ç›¸å…³èµ„æº
https://getcomposer.org/  å®˜ç½‘
http://www.php-fig.org/ [FIGå°ç»„]
https://packagist.org/ [package]
https://github.com/composer/installers#current-supported-types  è‡ªå®šä¹‰ç±»å‹æ¥å®‰è£…åˆ°ä¸åŒçš„ä½ç½®
http://docs.phpcomposer.com/articles/handling-private-packages-with-satis.html  satiså¤„ç†ç§æœ‰èµ„æº
http://docs.phpcomposer.com/articles/scripts.html ç‰¹å®šäº‹ä»¶æ‰§è¡Œè„šæœ¬
